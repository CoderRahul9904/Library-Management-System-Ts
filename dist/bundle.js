(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t,n){const o=n.value;return{configurable:!0,get(){return o.bind(this)}}}e.d({},{g:()=>a,d:()=>c});class n{constructor(){this.templateElement=document.getElementById("notification-template"),this.hostElement=document.getElementById("Notification"),this.renderNotification()}renderNotification(){const e=document.importNode(this.templateElement.content,!0),t=e.querySelector(".whoIssued"),n=o.UserInfo.length-1;t.textContent=`${o.UserInfo[n].firstName} ${o.UserInfo[n].lastName} issued a book.`,this.hostElement.appendChild(e),setTimeout((()=>{this.hostElement.replaceChildren()}),2e3)}}class o{constructor(){this.templateElement=document.getElementById("modal-details"),this.hostElement=document.getElementById("modal")}open(){this.hostElement.classList.contains("hidden")&&this.hostElement.classList.remove("hidden");const e=document.importNode(this.templateElement.content,!0);e.querySelector(".close").addEventListener("click",(e=>this.close(e))),this.hostElement.appendChild(e)}close(e){const t=document.getElementById("user-form");e.preventDefault();const i=new FormData(t),s=Object.fromEntries(i.entries());o.UserInfo.push(s),a.increaseNotifyCount(),new n,console.log(o.UserInfo),this.hostElement.replaceChildren(),this.hostElement.classList.contains("hidden")||this.hostElement.classList.add("hidden")}}o.UserInfo=[],function(e,t,n,o){var i,s=arguments.length,l=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);s>3&&l&&Object.defineProperty(t,n,l)}([t],o.prototype,"close",null);class i{constructor(){var e;this.templateElement=document.getElementById("IssuerInfo"),this.hostElement=document.getElementById("IssuerDetails"),this.closeButton=this.hostElement.querySelector(".closeNotification"),this.initialRender=document.getElementById("Details"),null===(e=this.initialRender.querySelector(".CloseButton"))||void 0===e||e.addEventListener("click",this.workOfCloseButton.bind(this))}workOfCloseButton(){this.initialRender.classList.add("hidden"),c.open()}formatDate(e){return e.toLocaleDateString()}createIssuerInfo(e){const t=new Date,n=new Date(t);n.setDate(n.getDate()+15);const o=document.importNode(this.templateElement.content,!0),i=o.querySelector(".IssuerName"),s=o.querySelector(".IssuedDate"),l=o.querySelector(".ReturnDate"),r=o.querySelector(".Email");return i.textContent=`${e.firstName} ${e.lastName} issued a book`,s.textContent=this.formatDate(t),l.textContent=this.formatDate(n),r.textContent=e.email,o}fillDetails(){c.close(),a.close(),this.hostElement.replaceChildren(),this.initialRender.classList.remove("hidden");const e=document.createDocumentFragment();o.UserInfo.forEach((t=>{const n=this.createIssuerInfo(t);e.appendChild(n)})),this.hostElement.appendChild(e)}}class s{constructor(){this.templateElement=document.getElementById("header-template"),this.hostElement=document.getElementById("Header");const e=document.importNode(this.templateElement.content,!0);this.NotifyCountDiv=e.querySelector(".NumberOfUser"),this.renderHeader(e),this.searchBar=this.attachSearchInput()}attachSearchInput(){return this.hostElement.querySelector(".SearchBook")}increaseNotifyCount(){const e=o.UserInfo.length;0===e?this.NotifyCountDiv.classList.add("hidden"):(this.NotifyCountDiv.classList.remove("hidden"),this.NotifyCountDiv.textContent=`${e}`)}renderHeader(e){const t=e.querySelector(".notifyButton");this.increaseNotifyCount(),t.addEventListener("click",this.onClickOnNotification),this.hostElement.appendChild(e)}onClickOnNotification(){(new i).fillDetails()}}!function(e,t,n,o){var i,s=arguments.length,l=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);s>3&&l&&Object.defineProperty(t,n,l)}([t],s.prototype,"onClickOnNotification",null);const l=[{title:"RICH DAD POOR DAD",description:"A groundbreaking personal finance book by Robert Kiyosaki that teaches the importance of financial education, investing, and entrepreneurship through the contrasting lessons from two 'dads' â€” one rich and one poor.",imageUrl:"../public/FirstImage.jpg"},{title:"THINK AND GROW RICH",description:"Written by Napoleon Hill, this book is a timeless guide on how to build wealth and success by harnessing the power of thought and a burning desire to achieve your goals.",imageUrl:"../public/ThinkAndGrowRich.jpg"},{title:"ELON MUSK",description:"A biography by Ashlee Vance that chronicles the life, vision, and innovative ventures of tech billionaire Elon Musk, covering his roles in Tesla, SpaceX, and beyond.",imageUrl:"../public/ElonMusk.jpg"},{title:"APJ ABDUL KALAM: WINGS OF FIRE",description:"The inspiring autobiography of Dr. APJ Abdul Kalam, India's Missile Man and former President, detailing his journey from a humble background to becoming a visionary scientist and leader.",imageUrl:"../public/ApjV2.jpg"},{title:"THE 7 HABITS OF HIGHLY EFFECTIVE PEOPLE",description:"Stephen R. Covey presents a holistic approach to personal and professional effectiveness through seven timeless habits that emphasize principles and character development.",imageUrl:"../public/the7habbits.jpg"},{title:"HOW TO TALK TO ANYONE",description:"Leil Lowndes shares 92 easy and effective communication strategies to build confidence, charm, and social influence in both professional and personal settings.",imageUrl:"../public/HowToTalk.jpg"},{title:"THE ALCHEMIST",description:"Paulo Coelho's international bestseller is a philosophical tale about a young shepherd's quest for his personal legend, filled with wisdom on following one's dreams and destiny.",imageUrl:"../public/TheAlchemistV2.jpg"},{title:"THE GOD OF SMALL THINGS",description:"Arundhati Roy's Booker Prize-winning novel weaves a powerful narrative of family, love, and societal norms in the backdrop of Kerala, India, told with lyrical prose and depth.",imageUrl:"../public/TheGodOfSmallThingsV2.jpg"},{title:"TRAIN TO PAKISTAN",description:"Khushwant Singh's historical novel explores the human impact of the 1947 Partition of India through the lens of a small village caught in the turmoil, blending fiction with history.",imageUrl:"../public/TheTrainToPokV2.jpg"},{title:"ATOMIC HABITS",description:"James Clear offers a practical guide to building good habits and breaking bad ones, demonstrating how small, incremental changes can lead to significant personal growth over time.",imageUrl:"../public/AtomicHabbitsV2.jpg"}];class r extends s{constructor(){super(),this.templateElement=document.getElementById("book-search-template"),this.hostElement=document.getElementById("book-search"),this.searchBar.addEventListener("input",this.OnChangeOfSearch)}open(){this.hostElement.classList.remove("hidden")}close(){this.hostElement.classList.add("hidden")}OnChangeOfSearch(){this.hostElement.classList.remove("hidden"),this.hostElement.replaceChildren();const e=this.searchBar.value.trim().toUpperCase();console.log(e);const t=l.filter((t=>t.title.trim().includes(e)));console.log(t),this.renderSingleBook(t)}renderSingleBook(e){e&&c.close();const t=document.createDocumentFragment();for(const n of e){if(!n)return;{const e=document.importNode(this.templateElement.content,!0);e.querySelector(".SearchedBookImg").src=n.imageUrl,e.querySelector(".BookTitle").textContent=n.title,e.querySelector(".open").addEventListener("click",(()=>{(new o).open()})),e.querySelector(".BookDescription").textContent=n.description,t.appendChild(e)}}this.hostElement.appendChild(t)}}!function(e,t,n,o){var i,s=arguments.length,l=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);s>3&&l&&Object.defineProperty(t,n,l)}([t],r.prototype,"OnChangeOfSearch",null);const a=new r,c=new class{constructor(){this.templateElement=document.getElementById("books-template"),this.hostElement=document.getElementById("books"),this.templateInitialStepBooks=document.getElementById("books-initial-setup"),this.renderInitialLayout(),this.renderBooks()}open(){this.hostElement.classList.remove("hidden")}close(){this.hostElement.classList.add("hidden")}renderBooks(){const e=this.hostElement.firstElementChild,t=document.createDocumentFragment();for(const e of l){const n=document.importNode(this.templateElement.content,!0),i=n.querySelector(".BookImage"),s=n.querySelector(".open");i&&(i.src=e.imageUrl),s.addEventListener("click",(()=>{(new o).open()})),t.appendChild(n)}e.appendChild(t)}renderInitialLayout(){const e=document.importNode(this.templateInitialStepBooks.content,!0);this.hostElement.appendChild(e)}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDN0NMLEtBQUtNLFlBQVlGLFNBQVNDLGVBQWUsU0FDekNMLEtBQUtpRyx5QkFBMEI3RixTQUFTQyxlQUFlLHVCQUN2REwsS0FBS2tHLHNCQUNMbEcsS0FBS2dELGFBQ1QsQ0FFTyxJQUFBekIsR0FDTHZCLEtBQUtNLFlBQVlrQixVQUFVRSxPQUFPLFNBQ3BDLENBQ08sS0FBQUksR0FDTDlCLEtBQUtNLFlBQVlrQixVQUFVbUIsSUFBSSxTQUNqQyxDQUVRLFdBQUFLLEdBQ0osTUFBTW1ELEVBQVVuRyxLQUFLTSxZQUFZOEYsa0JBQzNCbEMsRUFBVzlELFNBQVMrRCx5QkFDMUIsSUFBSyxNQUFNd0IsS0FBUVosRUFBTyxDQUN4QixNQUFNc0IsRUFBbUJqRyxTQUFTSyxXQUFXVCxLQUFLRyxnQkFBZ0JPLFNBQVMsR0FDckU0RixFQUFNRCxFQUFpQnpGLGNBQWMsY0FDckMyRixFQUFrQkYsRUFBaUJ6RixjQUFjLFNBQ25EMEYsSUFDRkEsRUFBSU4sSUFBTUwsRUFBS1QsVUFFakJxQixFQUFnQjNFLGlCQUFpQixTQUFTLE1BQzFCLElBQUlkLEdBQ1pTLE1BQU0sSUFFZDJDLEVBQVM5QyxZQUFZaUYsRUFDdkIsQ0FFQUYsRUFBUS9FLFlBQVk4QyxFQUN0QixDQUVNLG1CQUFBZ0MsR0FDSixNQUFNTSxFQUFjcEcsU0FBU0ssV0FBV1QsS0FBS2lHLHlCQUF5QnZGLFNBQVMsR0FDL0VWLEtBQUtNLFlBQVljLFlBQVlvRixFQUNqQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9saWJyYXJ5LW1hbmFnZW1lbnQtc3lzdGVtLXRzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9saWJyYXJ5LW1hbmFnZW1lbnQtc3lzdGVtLXRzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy8uL3NyYy9kZWNvcmF0b3JzL0F1dG9CaW5kRGVjb3JhdG9yLnRzIiwid2VicGFjazovL2xpYnJhcnktbWFuYWdlbWVudC1zeXN0ZW0tdHMvLi9zcmMvY29tcG9uZW50cy9Ob3RpZmljYXRpb24udHMiLCJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy8uL3NyYy9tb2RhbHMvbW9kYWwudHMiLCJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy8uL3NyYy9jb21wb25lbnRzL0lzc3VlckRldGFpbHMudHMiLCJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy8uL3NyYy9jb21wb25lbnRzL0hlYWRlci50cyIsIndlYnBhY2s6Ly9saWJyYXJ5LW1hbmFnZW1lbnQtc3lzdGVtLXRzLy4vc3JjL3V0aWwvQ29sbGVjdGlvbk9mQm9va3MudHMiLCJ3ZWJwYWNrOi8vbGlicmFyeS1tYW5hZ2VtZW50LXN5c3RlbS10cy8uL3NyYy9jb21wb25lbnRzL1Nob3dTaW5nbGVCb29rLnRzIiwid2VicGFjazovL2xpYnJhcnktbWFuYWdlbWVudC1zeXN0ZW0tdHMvLi9zcmMvYXBwLnRzIiwid2VicGFjazovL2xpYnJhcnktbWFuYWdlbWVudC1zeXN0ZW0tdHMvLi9zcmMvY29tcG9uZW50cy9EaXNwbGF5Qm9va3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgZnVuY3Rpb24gQXV0b2JpbmQoXzogYW55LCBfMjogc3RyaW5nIHwgU3ltYm9sLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpOiBQcm9wZXJ0eURlc2NyaXB0b3J7XHJcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZD1kZXNjcmlwdG9yLnZhbHVlO1xyXG4gICAgY29uc3QgYWRqdXN0YWJsZURlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuICAgICAgY29uZmlndXJhYmxlIDogdHJ1ZSxcclxuICAgICAgZ2V0KCl7XHJcbiAgICAgICAgICBjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcclxuICAgICAgICAgIHJldHVybiBib3VuZEZuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWRqdXN0YWJsZURlc2NyaXB0b3I7XHJcbiAgfSIsImltcG9ydCB7IE1vZGFsIH0gZnJvbSBcIi4uL21vZGFscy9tb2RhbFwiO1xyXG5leHBvcnQgY2xhc3Mgbm90aWZpY2F0aW9ue1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm90aWZpY2F0aW9uLXRlbXBsYXRlJykhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnRcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnTm90aWZpY2F0aW9uJykhIGFzIEhUTUxFbGVtZW50XHJcbiAgICAgICAgdGhpcy5yZW5kZXJOb3RpZmljYXRpb24oKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcmVuZGVyTm90aWZpY2F0aW9uKCl7XHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbk5vZGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIHRydWUpO1xyXG4gICAgICBjb25zdCBpc3N1ZXJOYW1lPSBub3RpZmljYXRpb25Ob2RlLnF1ZXJ5U2VsZWN0b3IoJy53aG9Jc3N1ZWQnKSEgYXMgSFRNTFBhcmFncmFwaEVsZW1lbnRcclxuICAgICAgY29uc3QgVGFyZ2V0VXNlcj1Nb2RhbC5Vc2VySW5mby5sZW5ndGgtMVxyXG4gICAgICBpc3N1ZXJOYW1lLnRleHRDb250ZW50PWAke01vZGFsLlVzZXJJbmZvW1RhcmdldFVzZXJdLmZpcnN0TmFtZX0gJHtNb2RhbC5Vc2VySW5mb1tUYXJnZXRVc2VyXS5sYXN0TmFtZX0gaXNzdWVkIGEgYm9vay5gXHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uTm9kZSlcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhvc3RFbGVtZW50LnJlcGxhY2VDaGlsZHJlbigpXHJcbiAgICAgIH0sIDIwMDApO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVXNlckluZm9UeXBlIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvVXNlckluZm9UeXBlXCI7XHJcbmltcG9ydCB7IEF1dG9iaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvQXV0b0JpbmREZWNvcmF0b3JcIjtcclxuaW1wb3J0IHsgSGVhZGVyc2VhcmNoQmFyT2JqIH0gZnJvbSBcIi4uL2FwcFwiO1xyXG5pbXBvcnQgeyBub3RpZmljYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Ob3RpZmljYXRpb25cIjtcclxuZXhwb3J0IGNsYXNzIE1vZGFse1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHVibGljIHN0YXRpYyBVc2VySW5mbzogVXNlckluZm9UeXBlW10gPSBbXTtcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1kZXRhaWxzJykhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnRcclxuICAgICAgdGhpcy5ob3N0RWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKSEgYXMgSFRNTEVsZW1lbnRcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG9wZW4oKXtcclxuICAgICAgaWYodGhpcy5ob3N0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKXtcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgTW9kYWxOb2RlPWRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCx0cnVlKVxyXG4gICAgICBjb25zdCBjbG9zZU1vZGFsQnV0dG9uPSBNb2RhbE5vZGUucXVlcnlTZWxlY3RvcignLmNsb3NlJykhIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICAgIGNsb3NlTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChldmVudCkgPT4gdGhpcy5jbG9zZShldmVudCkpXHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQoTW9kYWxOb2RlKVxyXG4gICAgfVxyXG4gICAgQEF1dG9iaW5kXHJcbiAgICBwdWJsaWMgY2xvc2UoZXZlbnQ6IEV2ZW50KXtcclxuICAgICAgY29uc3QgZm9ybT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlci1mb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgY29uc3QgSXNzdWVyRGV0YWlsPSBuZXcgRm9ybURhdGEoZm9ybSlcclxuICAgICAgY29uc3QgVXNlcj1PYmplY3QuZnJvbUVudHJpZXMoSXNzdWVyRGV0YWlsLmVudHJpZXMoKSlcclxuICAgICAgTW9kYWwuVXNlckluZm8ucHVzaChVc2VyKVxyXG4gICAgICBIZWFkZXJzZWFyY2hCYXJPYmouaW5jcmVhc2VOb3RpZnlDb3VudCgpXHJcbiAgICAgIGNvbnN0IG5vdGlmeT1uZXcgbm90aWZpY2F0aW9uKClcclxuICAgICAgY29uc29sZS5sb2coTW9kYWwuVXNlckluZm8pXHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQucmVwbGFjZUNoaWxkcmVuKClcclxuICAgICAgaWYoISh0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpKXtcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IiwiaW1wb3J0IHsgVXNlckluZm9UeXBlICB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL1VzZXJJbmZvVHlwZVwiO1xyXG5pbXBvcnQgeyByZW5kZXJCb29rcyB9IGZyb20gXCIuLi9hcHBcIjtcclxuaW1wb3J0IHsgSGVhZGVyc2VhcmNoQmFyT2JqIH0gZnJvbSBcIi4uL2FwcFwiO1xyXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gXCIuLi9tb2RhbHMvbW9kYWxcIjtcclxuZXhwb3J0IGNsYXNzIElzc3VlckRldGFpbHMge1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgY2xvc2VCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgaW5pdGlhbFJlbmRlcjogSFRNTERpdkVsZW1lbnRcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdJc3N1ZXJJbmZvJykhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnSXNzdWVyRGV0YWlscycpISBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgdGhpcy5jbG9zZUJ1dHRvbiA9IHRoaXMuaG9zdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlTm90aWZpY2F0aW9uJykhIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICB0aGlzLmluaXRpYWxSZW5kZXI9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEZXRhaWxzJykhIGFzIEhUTUxEaXZFbGVtZW50XHJcbiAgXHJcbiAgICAgIHRoaXMuaW5pdGlhbFJlbmRlci5xdWVyeVNlbGVjdG9yKCcuQ2xvc2VCdXR0b24nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMud29ya09mQ2xvc2VCdXR0b24uYmluZCh0aGlzKSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSB3b3JrT2ZDbG9zZUJ1dHRvbigpe1xyXG4gICAgICB0aGlzLmluaXRpYWxSZW5kZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgcmVuZGVyQm9va3Mub3BlbigpXHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpOyBcclxuICAgIH1cclxuICBcclxuICAgIHByaXZhdGUgY3JlYXRlSXNzdWVySW5mbyhsaXN0VXNlcjogVXNlckluZm9UeXBlKTogRG9jdW1lbnRGcmFnbWVudCB7XHJcbiAgICAgIGNvbnN0IElzc3VlZF9EYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgUmV0dXJuX0RhdGUgPSBuZXcgRGF0ZShJc3N1ZWRfRGF0ZSk7XHJcbiAgICAgIFJldHVybl9EYXRlLnNldERhdGUoUmV0dXJuX0RhdGUuZ2V0RGF0ZSgpICsgMTUpO1xyXG4gIFxyXG4gICAgICBjb25zdCBJc3N1ZXJJbmZvTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XHJcbiAgXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBJc3N1ZXJOYW1lID0gSXNzdWVySW5mb05vZGUucXVlcnlTZWxlY3RvcignLklzc3Vlck5hbWUnKSEgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGNvbnN0IElzc3VlZERhdGUgPSBJc3N1ZXJJbmZvTm9kZS5xdWVyeVNlbGVjdG9yKCcuSXNzdWVkRGF0ZScpISBhcyBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICAgIGNvbnN0IFJldHVybkRhdGUgPSBJc3N1ZXJJbmZvTm9kZS5xdWVyeVNlbGVjdG9yKCcuUmV0dXJuRGF0ZScpISBhcyBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICAgIGNvbnN0IElzc3VlckVtYWlsID0gSXNzdWVySW5mb05vZGUucXVlcnlTZWxlY3RvcignLkVtYWlsJykhIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xyXG4gIFxyXG4gICAgICBcclxuICAgICAgSXNzdWVyTmFtZS50ZXh0Q29udGVudCA9IGAke2xpc3RVc2VyLmZpcnN0TmFtZX0gJHtsaXN0VXNlci5sYXN0TmFtZX0gaXNzdWVkIGEgYm9va2A7XHJcbiAgICAgIElzc3VlZERhdGUudGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdERhdGUoSXNzdWVkX0RhdGUpO1xyXG4gICAgICBSZXR1cm5EYXRlLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREYXRlKFJldHVybl9EYXRlKTtcclxuICAgICAgSXNzdWVyRW1haWwudGV4dENvbnRlbnQgPSBsaXN0VXNlci5lbWFpbCEgYXMgc3RyaW5nO1xyXG4gIFxyXG4gICAgICByZXR1cm4gSXNzdWVySW5mb05vZGU7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwdWJsaWMgZmlsbERldGFpbHMoKTogdm9pZCB7XHJcbiAgICAgIHJlbmRlckJvb2tzLmNsb3NlKClcclxuICAgICAgSGVhZGVyc2VhcmNoQmFyT2JqLmNsb3NlKClcclxuICAgICAgdGhpcy5ob3N0RWxlbWVudC5yZXBsYWNlQ2hpbGRyZW4oKTsgXHJcbiAgICAgIHRoaXMuaW5pdGlhbFJlbmRlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgXHJcbiAgXHJcbiAgICAgIE1vZGFsLlVzZXJJbmZvLmZvckVhY2gobGlzdFVzZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVzZXJOb2RlID0gdGhpcy5jcmVhdGVJc3N1ZXJJbmZvKGxpc3RVc2VyKTtcclxuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh1c2VyTm9kZSk7XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTsgXHJcbiAgICB9XHJcbiAgfVxyXG4gICIsImltcG9ydCB7IE1vZGFsIH0gZnJvbSBcIi4uL21vZGFscy9tb2RhbFwiO1xyXG5pbXBvcnQgeyBBdXRvYmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL0F1dG9CaW5kRGVjb3JhdG9yXCI7XHJcbmltcG9ydCB7IElzc3VlckRldGFpbHMgfSBmcm9tIFwiLi9Jc3N1ZXJEZXRhaWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGVhZGVye1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgc2VhcmNoQmFyOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgTm90aWZ5Q291bnREaXY6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXItdGVtcGxhdGUnKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudFxyXG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdIZWFkZXInKSEgYXMgSFRNTEVsZW1lbnRcclxuICAgICAgICBjb25zdCBoZWFkZXJOb2RlPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsdHJ1ZSlcclxuICAgICAgICB0aGlzLk5vdGlmeUNvdW50RGl2PSBoZWFkZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoJy5OdW1iZXJPZlVzZXInKSEgYXMgSFRNTERpdkVsZW1lbnRcclxuICAgICAgICB0aGlzLnJlbmRlckhlYWRlcihoZWFkZXJOb2RlKVxyXG4gICAgICAgIHRoaXMuc2VhcmNoQmFyPSB0aGlzLmF0dGFjaFNlYXJjaElucHV0KClcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXR0YWNoU2VhcmNoSW5wdXQoKXtcclxuICAgICAgICBjb25zdCBTZWFyY2hCb29rRWxlPXRoaXMuaG9zdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLlNlYXJjaEJvb2snKSEgYXMgSFRNTElucHV0RWxlbWVudFxyXG4gICAgICAgIHJldHVybiBTZWFyY2hCb29rRWxlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaW5jcmVhc2VOb3RpZnlDb3VudCgpe1xyXG4gICAgICBjb25zdCBMZW5ndGg9TW9kYWwuVXNlckluZm8ubGVuZ3RoXHJcbiAgICAgIGlmKExlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgdGhpcy5Ob3RpZnlDb3VudERpdi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLk5vdGlmeUNvdW50RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgICAgdGhpcy5Ob3RpZnlDb3VudERpdi50ZXh0Q29udGVudD1gJHtMZW5ndGh9YFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlbmRlckhlYWRlcihoZWFkZXJOb2RlOiBEb2N1bWVudEZyYWdtZW50KXtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBub3RpZmljYXRpb25CdXR0b249aGVhZGVyTm9kZS5xdWVyeVNlbGVjdG9yKCcubm90aWZ5QnV0dG9uJykhIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICAgICAgLy8gY29uc3QgTm90aWZ5Q291bnREaXY9IG5vdGlmaWNhdGlvbkJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuTnVtYmVyT2ZVc2VyJykhIGFzIEhUTUxEaXZFbGVtZW50XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZU5vdGlmeUNvdW50KClcclxuICAgICAgICBub3RpZmljYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRoaXMub25DbGlja09uTm90aWZpY2F0aW9uKVxyXG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGVyTm9kZSlcclxuICAgIH1cclxuICAgIEBBdXRvYmluZFxyXG4gICAgcHJpdmF0ZSBvbkNsaWNrT25Ob3RpZmljYXRpb24oKXtcclxuICAgICAgY29uc3QgU2VuZFVzZXJOb3RpZmljYXRpb249IG5ldyBJc3N1ZXJEZXRhaWxzKClcclxuICAgICAgU2VuZFVzZXJOb3RpZmljYXRpb24uZmlsbERldGFpbHMoKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL0Jvb2tJbnRlcmZhY2VcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBib29rczogQm9va1tdID0gW1xyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJSSUNIIERBRCBQT09SIERBRFwiLFxyXG4gICAgICBkZXNjcmlwdGlvbjogXCJBIGdyb3VuZGJyZWFraW5nIHBlcnNvbmFsIGZpbmFuY2UgYm9vayBieSBSb2JlcnQgS2l5b3Nha2kgdGhhdCB0ZWFjaGVzIHRoZSBpbXBvcnRhbmNlIG9mIGZpbmFuY2lhbCBlZHVjYXRpb24sIGludmVzdGluZywgYW5kIGVudHJlcHJlbmV1cnNoaXAgdGhyb3VnaCB0aGUgY29udHJhc3RpbmcgbGVzc29ucyBmcm9tIHR3byAnZGFkcycg4oCUIG9uZSByaWNoIGFuZCBvbmUgcG9vci5cIixcclxuICAgICAgaW1hZ2VVcmw6ICcuLi9wdWJsaWMvRmlyc3RJbWFnZS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJUSElOSyBBTkQgR1JPVyBSSUNIXCIsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBcIldyaXR0ZW4gYnkgTmFwb2xlb24gSGlsbCwgdGhpcyBib29rIGlzIGEgdGltZWxlc3MgZ3VpZGUgb24gaG93IHRvIGJ1aWxkIHdlYWx0aCBhbmQgc3VjY2VzcyBieSBoYXJuZXNzaW5nIHRoZSBwb3dlciBvZiB0aG91Z2h0IGFuZCBhIGJ1cm5pbmcgZGVzaXJlIHRvIGFjaGlldmUgeW91ciBnb2Fscy5cIixcclxuICAgICAgaW1hZ2VVcmw6ICcuLi9wdWJsaWMvVGhpbmtBbmRHcm93UmljaC5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJFTE9OIE1VU0tcIixcclxuICAgICAgZGVzY3JpcHRpb246IFwiQSBiaW9ncmFwaHkgYnkgQXNobGVlIFZhbmNlIHRoYXQgY2hyb25pY2xlcyB0aGUgbGlmZSwgdmlzaW9uLCBhbmQgaW5ub3ZhdGl2ZSB2ZW50dXJlcyBvZiB0ZWNoIGJpbGxpb25haXJlIEVsb24gTXVzaywgY292ZXJpbmcgaGlzIHJvbGVzIGluIFRlc2xhLCBTcGFjZVgsIGFuZCBiZXlvbmQuXCIsXHJcbiAgICAgIGltYWdlVXJsOiAnLi4vcHVibGljL0Vsb25NdXNrLmpwZydcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiQVBKIEFCRFVMIEtBTEFNOiBXSU5HUyBPRiBGSVJFXCIsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBpbnNwaXJpbmcgYXV0b2Jpb2dyYXBoeSBvZiBEci4gQVBKIEFiZHVsIEthbGFtLCBJbmRpYSdzIE1pc3NpbGUgTWFuIGFuZCBmb3JtZXIgUHJlc2lkZW50LCBkZXRhaWxpbmcgaGlzIGpvdXJuZXkgZnJvbSBhIGh1bWJsZSBiYWNrZ3JvdW5kIHRvIGJlY29taW5nIGEgdmlzaW9uYXJ5IHNjaWVudGlzdCBhbmQgbGVhZGVyLlwiLFxyXG4gICAgICBpbWFnZVVybDogJy4uL3B1YmxpYy9BcGpWMi5qcGcnXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIlRIRSA3IEhBQklUUyBPRiBISUdITFkgRUZGRUNUSVZFIFBFT1BMRVwiLFxyXG4gICAgICBkZXNjcmlwdGlvbjogXCJTdGVwaGVuIFIuIENvdmV5IHByZXNlbnRzIGEgaG9saXN0aWMgYXBwcm9hY2ggdG8gcGVyc29uYWwgYW5kIHByb2Zlc3Npb25hbCBlZmZlY3RpdmVuZXNzIHRocm91Z2ggc2V2ZW4gdGltZWxlc3MgaGFiaXRzIHRoYXQgZW1waGFzaXplIHByaW5jaXBsZXMgYW5kIGNoYXJhY3RlciBkZXZlbG9wbWVudC5cIixcclxuICAgICAgaW1hZ2VVcmw6ICcuLi9wdWJsaWMvdGhlN2hhYmJpdHMuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0aXRsZTogXCJIT1cgVE8gVEFMSyBUTyBBTllPTkVcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCJMZWlsIExvd25kZXMgc2hhcmVzIDkyIGVhc3kgYW5kIGVmZmVjdGl2ZSBjb21tdW5pY2F0aW9uIHN0cmF0ZWdpZXMgdG8gYnVpbGQgY29uZmlkZW5jZSwgY2hhcm0sIGFuZCBzb2NpYWwgaW5mbHVlbmNlIGluIGJvdGggcHJvZmVzc2lvbmFsIGFuZCBwZXJzb25hbCBzZXR0aW5ncy5cIixcclxuICAgICAgICBpbWFnZVVybDogJy4uL3B1YmxpYy9Ib3dUb1RhbGsuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiVEhFIEFMQ0hFTUlTVFwiLFxyXG4gICAgICBkZXNjcmlwdGlvbjogXCJQYXVsbyBDb2VsaG8ncyBpbnRlcm5hdGlvbmFsIGJlc3RzZWxsZXIgaXMgYSBwaGlsb3NvcGhpY2FsIHRhbGUgYWJvdXQgYSB5b3VuZyBzaGVwaGVyZCdzIHF1ZXN0IGZvciBoaXMgcGVyc29uYWwgbGVnZW5kLCBmaWxsZWQgd2l0aCB3aXNkb20gb24gZm9sbG93aW5nIG9uZSdzIGRyZWFtcyBhbmQgZGVzdGlueS5cIixcclxuICAgICAgaW1hZ2VVcmw6ICcuLi9wdWJsaWMvVGhlQWxjaGVtaXN0VjIuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiVEhFIEdPRCBPRiBTTUFMTCBUSElOR1NcIixcclxuICAgICAgZGVzY3JpcHRpb246IFwiQXJ1bmRoYXRpIFJveSdzIEJvb2tlciBQcml6ZS13aW5uaW5nIG5vdmVsIHdlYXZlcyBhIHBvd2VyZnVsIG5hcnJhdGl2ZSBvZiBmYW1pbHksIGxvdmUsIGFuZCBzb2NpZXRhbCBub3JtcyBpbiB0aGUgYmFja2Ryb3Agb2YgS2VyYWxhLCBJbmRpYSwgdG9sZCB3aXRoIGx5cmljYWwgcHJvc2UgYW5kIGRlcHRoLlwiLFxyXG4gICAgICBpbWFnZVVybDogJy4uL3B1YmxpYy9UaGVHb2RPZlNtYWxsVGhpbmdzVjIuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiVFJBSU4gVE8gUEFLSVNUQU5cIixcclxuICAgICAgZGVzY3JpcHRpb246IFwiS2h1c2h3YW50IFNpbmdoJ3MgaGlzdG9yaWNhbCBub3ZlbCBleHBsb3JlcyB0aGUgaHVtYW4gaW1wYWN0IG9mIHRoZSAxOTQ3IFBhcnRpdGlvbiBvZiBJbmRpYSB0aHJvdWdoIHRoZSBsZW5zIG9mIGEgc21hbGwgdmlsbGFnZSBjYXVnaHQgaW4gdGhlIHR1cm1vaWwsIGJsZW5kaW5nIGZpY3Rpb24gd2l0aCBoaXN0b3J5LlwiLFxyXG4gICAgICBpbWFnZVVybDogJy4uL3B1YmxpYy9UaGVUcmFpblRvUG9rVjIuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiQVRPTUlDIEhBQklUU1wiLFxyXG4gICAgICBkZXNjcmlwdGlvbjogXCJKYW1lcyBDbGVhciBvZmZlcnMgYSBwcmFjdGljYWwgZ3VpZGUgdG8gYnVpbGRpbmcgZ29vZCBoYWJpdHMgYW5kIGJyZWFraW5nIGJhZCBvbmVzLCBkZW1vbnN0cmF0aW5nIGhvdyBzbWFsbCwgaW5jcmVtZW50YWwgY2hhbmdlcyBjYW4gbGVhZCB0byBzaWduaWZpY2FudCBwZXJzb25hbCBncm93dGggb3ZlciB0aW1lLlwiLFxyXG4gICAgICBpbWFnZVVybDogJy4uL3B1YmxpYy9BdG9taWNIYWJiaXRzVjIuanBnJ1xyXG4gICAgfVxyXG4gIF07IiwiaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSBcIi4vSGVhZGVyXCI7XHJcbmltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9Cb29rSW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IEF1dG9iaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvQXV0b0JpbmREZWNvcmF0b3JcIjtcclxuaW1wb3J0IHsgcmVuZGVyQm9va3N9IGZyb20gXCIuLi9hcHBcIjtcclxuaW1wb3J0IHsgYm9va3MgfSBmcm9tIFwiLi4vdXRpbC9Db2xsZWN0aW9uT2ZCb29rc1wiO1xyXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gXCIuLi9tb2RhbHMvbW9kYWxcIjtcclxuZXhwb3J0IGNsYXNzIHNob3dTaW5nbGVCb29rIGV4dGVuZHMgSGVhZGVye1xyXG4gICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gIFxyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgc3VwZXIoKVxyXG4gICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9vay1zZWFyY2gtdGVtcGxhdGUnKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgdGhpcy5ob3N0RWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9vay1zZWFyY2gnKSEgYXMgSFRNTEVsZW1lbnRcclxuICAgICAgXHJcbiAgICAgIHRoaXMuc2VhcmNoQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jyx0aGlzLk9uQ2hhbmdlT2ZTZWFyY2gpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBvcGVuKCl7XHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgIH1cclxuICBcclxuICAgIHB1YmxpYyBjbG9zZSgpe1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICB9XHJcbiAgICBAQXV0b2JpbmRcclxuICAgIHByaXZhdGUgT25DaGFuZ2VPZlNlYXJjaCgpe1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgIHRoaXMuaG9zdEVsZW1lbnQucmVwbGFjZUNoaWxkcmVuKClcclxuICAgICAgY29uc3QgU2VhcmNoVmFsdWU9KCh0aGlzLnNlYXJjaEJhci52YWx1ZSkudHJpbSgpKS50b1VwcGVyQ2FzZSgpXHJcbiAgICAgIGNvbnNvbGUubG9nKFNlYXJjaFZhbHVlKVxyXG4gICAgICBjb25zdCBTZWFyY2hlZEJvb2tzPWJvb2tzLmZpbHRlcigoYm9vaykgPT4gYm9vay50aXRsZS50cmltKCkuaW5jbHVkZXMoU2VhcmNoVmFsdWUpKSBhcyBCb29rW11cclxuICAgICAgY29uc29sZS5sb2coU2VhcmNoZWRCb29rcylcclxuICAgICAgdGhpcy5yZW5kZXJTaW5nbGVCb29rKFNlYXJjaGVkQm9va3MpXHJcbiAgICB9XHJcbiAgXHJcbiAgXHJcbiAgICBwcml2YXRlIHJlbmRlclNpbmdsZUJvb2soQm9vazogQm9va1tdKXtcclxuICAgICAgaWYoQm9vayl7XHJcbiAgICAgICAgcmVuZGVyQm9va3MuY2xvc2UoKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICBmb3IoY29uc3QgYm9vayBvZiBCb29rKXtcclxuICAgICAgICBpZihib29rKXtcclxuICAgICAgICBjb25zdCBTZWFyY2hlZEJvb2tOb2RlPWRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCx0cnVlKVxyXG4gICAgICAgIGNvbnN0IGltZz1TZWFyY2hlZEJvb2tOb2RlLnF1ZXJ5U2VsZWN0b3IoJy5TZWFyY2hlZEJvb2tJbWcnKSBhcyBIVE1MSW1hZ2VFbGVtZW50XHJcbiAgICAgICAgaW1nLnNyYz1ib29rLmltYWdlVXJsXHJcbiAgICAgICAgY29uc3QgdGl0bGVUZD1TZWFyY2hlZEJvb2tOb2RlLnF1ZXJ5U2VsZWN0b3IoJy5Cb29rVGl0bGUnKSBhcyBIVE1MVGFibGVDZWxsRWxlbWVudFxyXG4gICAgICAgIHRpdGxlVGQudGV4dENvbnRlbnQ9Ym9vay50aXRsZVxyXG4gIFxyXG4gIFxyXG4gICAgICAgIGNvbnN0IG1vZGFsT3BlbkJ1dHRvbiA9IFNlYXJjaGVkQm9va05vZGUucXVlcnlTZWxlY3RvcignLm9wZW4nKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgbW9kYWxPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICBcclxuICBcclxuICBcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblRkPVNlYXJjaGVkQm9va05vZGUucXVlcnlTZWxlY3RvcignLkJvb2tEZXNjcmlwdGlvbicpIGFzIEhUTUxUYWJsZUNlbGxFbGVtZW50XHJcbiAgICAgICAgZGVzY3JpcHRpb25UZC50ZXh0Q29udGVudD1ib29rLmRlc2NyaXB0aW9uXHJcbiAgXHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoU2VhcmNoZWRCb29rTm9kZSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICB9IiwiXHJcbmltcG9ydCB7IHNob3dTaW5nbGVCb29rIH0gZnJvbSBcIi4vY29tcG9uZW50cy9TaG93U2luZ2xlQm9va1wiXHJcbmltcG9ydCB7IGRpc3BsYXlib29rcyB9IGZyb20gXCIuL2NvbXBvbmVudHMvRGlzcGxheUJvb2tzXCJcclxuZXhwb3J0IGNvbnN0IEhlYWRlcnNlYXJjaEJhck9iaj0gbmV3IHNob3dTaW5nbGVCb29rKClcclxuZXhwb3J0IGNvbnN0IHJlbmRlckJvb2tzPSBuZXcgZGlzcGxheWJvb2tzKClcclxuIiwiaW1wb3J0IHsgYm9va3MgfSBmcm9tIFwiLi4vdXRpbC9Db2xsZWN0aW9uT2ZCb29rc1wiO1xyXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gXCIuLi9tb2RhbHMvbW9kYWxcIjtcclxuZXhwb3J0IGNsYXNzIGRpc3BsYXlib29rc3tcclxuICAgIHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHRlbXBsYXRlSW5pdGlhbFN0ZXBCb29rczogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va3MtdGVtcGxhdGUnKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudFxyXG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2tzJykhIGFzIEhUTUxFbGVtZW50XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUluaXRpYWxTdGVwQm9va3M9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29rcy1pbml0aWFsLXNldHVwJykhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnRcclxuICAgICAgICB0aGlzLnJlbmRlckluaXRpYWxMYXlvdXQoKVxyXG4gICAgICAgIHRoaXMucmVuZGVyQm9va3MoKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgb3Blbigpe1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xvc2UoKXtcclxuICAgICAgdGhpcy5ob3N0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgcmVuZGVyQm9va3MoKSB7XHJcbiAgICAgICAgY29uc3QgZ3JpZERpdiA9IHRoaXMuaG9zdEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XHJcbiAgICAgICAgICBjb25zdCBib29rc0NvbnRlbnROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LCB0cnVlKTtcclxuICAgICAgICAgIGNvbnN0IGltZyA9IGJvb2tzQ29udGVudE5vZGUucXVlcnlTZWxlY3RvcignLkJvb2tJbWFnZScpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgICBjb25zdCBtb2RhbE9wZW5CdXR0b24gPSBib29rc0NvbnRlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5vcGVuJykhIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgICAgaWYgKGltZykge1xyXG4gICAgICAgICAgICBpbWcuc3JjID0gYm9vay5pbWFnZVVybDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG1vZGFsT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChib29rc0NvbnRlbnROb2RlKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBncmlkRGl2LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVySW5pdGlhbExheW91dCgpe1xyXG4gICAgICAgIGNvbnN0IGJvb2tEaXZOb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlSW5pdGlhbFN0ZXBCb29rcy5jb250ZW50LCB0cnVlKTtcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50LmFwcGVuZENoaWxkKGJvb2tEaXZOb2RlKTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkF1dG9iaW5kIiwiXyIsIl8yIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJiaW5kIiwidGhpcyIsIm5vdGlmaWNhdGlvbiIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwicmVuZGVyTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiaXNzdWVyTmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJUYXJnZXRVc2VyIiwiTW9kYWwiLCJVc2VySW5mbyIsImxlbmd0aCIsInRleHRDb250ZW50IiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJvcGVuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJNb2RhbE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjbG9zZSIsImZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsIklzc3VlckRldGFpbCIsIkZvcm1EYXRhIiwiVXNlciIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsInB1c2giLCJIZWFkZXJzZWFyY2hCYXJPYmoiLCJpbmNyZWFzZU5vdGlmeUNvdW50IiwiY29uc29sZSIsImxvZyIsImFkZCIsIklzc3VlckRldGFpbHMiLCJjbG9zZUJ1dHRvbiIsImluaXRpYWxSZW5kZXIiLCJ3b3JrT2ZDbG9zZUJ1dHRvbiIsInJlbmRlckJvb2tzIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJjcmVhdGVJc3N1ZXJJbmZvIiwibGlzdFVzZXIiLCJJc3N1ZWRfRGF0ZSIsIkRhdGUiLCJSZXR1cm5fRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiSXNzdWVySW5mb05vZGUiLCJJc3N1ZXJOYW1lIiwiSXNzdWVkRGF0ZSIsIlJldHVybkRhdGUiLCJJc3N1ZXJFbWFpbCIsImVtYWlsIiwiZmlsbERldGFpbHMiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJmb3JFYWNoIiwidXNlck5vZGUiLCJIZWFkZXIiLCJoZWFkZXJOb2RlIiwiTm90aWZ5Q291bnREaXYiLCJyZW5kZXJIZWFkZXIiLCJzZWFyY2hCYXIiLCJhdHRhY2hTZWFyY2hJbnB1dCIsIkxlbmd0aCIsIm5vdGlmaWNhdGlvbkJ1dHRvbiIsIm9uQ2xpY2tPbk5vdGlmaWNhdGlvbiIsImJvb2tzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImltYWdlVXJsIiwic2hvd1NpbmdsZUJvb2siLCJzdXBlciIsIk9uQ2hhbmdlT2ZTZWFyY2giLCJTZWFyY2hWYWx1ZSIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsIlNlYXJjaGVkQm9va3MiLCJmaWx0ZXIiLCJib29rIiwiaW5jbHVkZXMiLCJyZW5kZXJTaW5nbGVCb29rIiwiQm9vayIsIlNlYXJjaGVkQm9va05vZGUiLCJzcmMiLCJ0ZW1wbGF0ZUluaXRpYWxTdGVwQm9va3MiLCJyZW5kZXJJbml0aWFsTGF5b3V0IiwiZ3JpZERpdiIsImZpcnN0RWxlbWVudENoaWxkIiwiYm9va3NDb250ZW50Tm9kZSIsImltZyIsIm1vZGFsT3BlbkJ1dHRvbiIsImJvb2tEaXZOb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==